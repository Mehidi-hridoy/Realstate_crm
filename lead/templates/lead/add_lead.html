{% extends 'crm/base.html' %}

{% block title %}Add Lead{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Add New Lead</h2>
    

    <form method="post" action="." class="needs-validation" novalidate>
        {% csrf_token %}

        {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {% for error in form.non_field_errors %}
                <div>{{ error }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="row g-4">   
            <!-- Left side: Basic Information -->
            <div class="col-md-5">
                <div class="card p-4 shadow-sm mb-3 bg-light">
                    <h4 class="mb-3">Basic Information</h4>
                    
                    <div class="mb-3">
                        {{ form.name.label_tag }} {{ form.name }}
                        {% if form.name.errors %}
                        <div class="text-danger">
                            {% for error in form.name.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.phone.label_tag }} {{ form.phone }}
                        {% if form.phone.errors %}
                        <div class="text-danger">
                            {% for error in form.phone.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.present_address.label_tag }} {{ form.present_address }}
                        {% if form.present_address.errors %}
                        <div class="text-danger">
                            {% for error in form.present_address.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.primaryemail.label_tag }} {{ form.primaryemail }}
                        {% if form.primaryemail.errors %}
                        <div class="text-danger">
                            {% for error in form.primaryemail.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.secondaryemail.label_tag }} {{ form.secondaryemail }}
                        {% if form.secondaryemail.errors %}
                        <div class="text-danger">
                            {% for error in form.secondaryemail.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.profession.label_tag }} {{ form.profession }}
                        {% if form.profession.errors %}
                        <div class="text-danger">
                            {% for error in form.profession.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.resident.label_tag }} {{ form.resident }}
                        {% if form.resident.errors %}
                        <div class="text-danger">
                            {% for error in form.resident.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.notes.label_tag }} {{ form.notes }}
                        {% if form.notes.errors %}
                        <div class="text-danger">
                            {% for error in form.notes.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.created_at.label_tag }} {{ form.created_at }}
                        {% if form.created_at.errors %}
                        <div class="text-danger">
                            {% for error in form.created_at.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.modified_at.label_tag }} {{ form.modified_at }}
                        {% if form.modified_at.errors %}
                        <div class="text-danger">
                            {% for error in form.modified_at.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.next_followup_date.label_tag }} {{ form.next_followup_date }}
                        {% if form.next_followup_date.errors %}
                        <div class="text-danger">
                            {% for error in form.next_followup_date.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Right side -->
            <div class="col-md-7">
                <!-- Source of Information -->
                <div class="card p-4 shadow-sm mb-5 bg-light">
                    <h4 class="mb-3">Source of Information</h4>

                    <div class="mb-3">
                        {{ form.leadsource.label_tag }} {{ form.leadsource }}
                        {% if form.leadsource.errors %}
                        <div class="text-danger">
                            {% for error in form.leadsource.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.subsource.label_tag }} {{ form.subsource }}
                        {% if form.subsource.errors %}
                        <div class="text-danger">
                            {% for error in form.subsource.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.teamleader.label_tag }} {{ form.teamleader }}
                        {% if form.teamleader.errors %}
                        <div class="text-danger">
                            {% for error in form.teamleader.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Prospect Reference Information -->
                <div class="card p-4 shadow-sm bg-light">
                    <h4 class="mb-3">Prospect Reference Information</h4>

                    <div class="mb-3">
                        {{ form.projecttype.label_tag }} {{ form.projecttype }}
                        {% if form.projecttype.errors %}
                        <div class="text-danger">
                            {% for error in form.projecttype.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.lead_status.label_tag }} {{ form.lead_status }}
                        {% if form.lead_status.errors %}
                        <div class="text-danger">
                            {% for error in form.lead_status.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.projectstatus.label_tag }} {{ form.projectstatus }}
                        {% if form.projectstatus.errors %}
                        <div class="text-danger">
                            {% for error in form.projectstatus.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.preferred_location.label_tag }} {{ form.preferred_location }}
                        {% if form.preferred_location.errors %}
                        <div class="text-danger">
                            {% for error in form.preferred_location.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.company.label_tag }} {{ form.company }}
                        {% if form.company.errors %}
                        <div class="text-danger">
                            {% for error in form.company.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.interested_project_building.label_tag }} {{ form.interested_project_building }}
                        {% if form.interested_project_building.errors %}
                        <div class="text-danger">
                            {% for error in form.interested_project_building.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.unit_size.label_tag }} {{ form.unit_size }}
                        {% if form.unit_size.errors %}
                        <div class="text-danger">
                            {% for error in form.unit_size.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.preference_floor.label_tag }} {{ form.preference_floor }}
                        {% if form.preference_floor.errors %}
                        <div class="text-danger">
                            {% for error in form.preference_floor.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.facing.label_tag }} {{ form.facing }}
                        {% if form.facing.errors %}
                        <div class="text-danger">
                            {% for error in form.facing.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.view.label_tag }} {{ form.view }}
                        {% if form.view.errors %}
                        <div class="text-danger">
                            {% for error in form.view.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        {{ form.budget.label_tag }} {{ form.budget }}
                        {% if form.budget.errors %}
                        <div class="text-danger">
                            {% for error in form.budget.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>

                <div class="mt-3">
                    <button type="submit" class="btn btn-primary me-2">Submit Lead</button>
                    <a href="{% url 'dashboard' %}" class="btn btn-secondary">Close</a>
                </div>
            </div>
        </div>
    </form>
</div>
{% endblock %}
